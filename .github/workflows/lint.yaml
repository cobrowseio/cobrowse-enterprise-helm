name: Lint

on:
  push:
  pull_request:

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - run: |
          wget https://get.helm.sh/helm-v3.6.3-linux-amd64.tar.gz -O - | tar -xz \
          && mv linux-amd64/helm helm \
          && chmod +x helm \
          && rm -rf linux-${ARCH}

      - run: |
          wget https://github.com/yannh/kubeconform/releases/download/v0.4.10/kubeconform-linux-amd64.tar.gz \
          && tar xf kubeconform-linux-amd64.tar.gz \
          && rm -r kubeconform-linux-amd64.tar.gz

      - run: ls -la
      - run: ./helm template . -f values.yaml | ./kubeconform -summary
